# Unpacker
卧式高速开箱机控制系统

**1 电气构成**  
Upper_PC：上位机或前端，负责人机交互显示部分。  
基于Knico Green系列7寸触摸屏，使用Kinco Dtools工具进行界面组态编辑。  
  
Lower_PC：下位机或后端，负责底层逻辑处理部分。  
基于VMMORE PC4M系列PAC控制器，使用Codesys V3.5.16工具进行程序逻辑编辑。  
  
上下位机之间，通过Modbus TCP协议进行数据交换。  

**2 运动控制**  
被控机构是一个3轴机械臂和一个2轴传送带，5个轴均为EtherCAT伺服从站，均装配增量型编码器。额外的，一个16入16出的数字IO模块，用于各种传感器和工具/状态的接口。  

机械臂部分，由本体2轴+附加1轴组成，均使用CSP方式进行运动控制。涉及到的运动方式包括  
(1)关节空间下的单轴点动；  
(2)笛卡尔空间下的单轴点动；  
(3)笛卡尔空间下的两点直线运动；  
(4)笛卡尔空间下的多点折线+衔接处轨迹融合运动。  

传送带部分，自动模式时使用CSV方式进行运动控制，手动模式时使用CSP方式进行运动控制。  
CSP方式下，仅需要实现点动运动，两轴不分主次，任一轴被触发，两轴均需同步执行点动。  
CSV方式下，仅需要实现单向变速运动。  

由于使用了增量编码器，故各轴回零操作还需借助额外的传感器，回零步骤  
(1)高速，反转，遇到零位传感器信号时减速停止；  
(2)低速，正转，遇到零位传感器信号时减速停止；  
(3)低速，反转，遇到零位传感器信号时减速停止；  
(4)高速，以用户设定的各轴回零方向，运动用户设定的零位偏移位移（即运动学零位姿态）。  

所有运动功能，均通过自主设计的算法函数实现规划、插补与驱动，未调用Codesys Softmotion库和CiA402轴参数字典。

**3 视频链接**  
- 功能调试  
  https://v.douyin.com/cMy_M7J8Y3Q/  
  https://v.douyin.com/Fj7FswWEOv0/  
- 生产模拟  
  https://v.douyin.com/N6TMCnLx7wM/  
  https://v.douyin.com/w83aDRtsUfA/

**4 特别说明**
- 本仓库虽完全对应视频所示的5轴伺服开箱机，但考虑NDA限制，并未开源对硬件授权检查的加密库，即使搭建出一模一样的机电硬件，工程下载后也会卡在初始化过程无法正常工作。
- 厂家已升级迭代了新版的8轴伺服开箱机，增加电动机构实现箱体尺寸自适应功能，单纯对设备感兴趣的请联系生产厂家。
- 本仓库仅用作学习研究和技术交流，请勿商用。
